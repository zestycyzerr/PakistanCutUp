<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PakistanCutUp</title>
  <!-- Favicons -->
<!-- Favicons -->
<link rel="icon" href="./favicon_io/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="./favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./favicon_io/favicon-16x16.png">
<link rel="apple-touch-icon" href="./favicon_io/apple-touch-icon.png">
<link rel="manifest" href="./favicon_io/site.webmanifest">
<link rel="icon" type="image/png" href="./favicon_io/android-chrome-192x192">
<link rel="icon" type="image/png" href="./favicon_io/android-chrome-512x512">

  <!--
    Single-file â€œmulti-pageâ€ app:
    - 4 pages: Home, Servers, Get Started, Login
    - Internal CSS + internal JS
    - Porsche-themed (white + green) styling
    - Scroll-driven dynamic visuals (parallax + hue shift + motion)
    - Replaceable logo + replaceable images
    - Interactive buttons (hover/focus/press) + pseudo-element effects
  -->

  <style>
    :root{
      --bg: #070a07;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.09);
      --stroke: rgba(255,255,255,0.14);
      --text: rgba(255,255,255,0.90);
      --muted: rgba(255,255,255,0.70);

      --green: #34ff6a;
      --green2:#00e85a;
      --white: #ffffff;

      --shadow: 0 18px 60px rgba(0,0,0,0.50);
      --shadow2: 0 10px 30px rgba(0,0,0,0.45);

      --radius: 18px;
      --radius2: 26px;

      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;

      --glow: 0 0 14px rgba(52,255,106,0.35);
      --glow2: 0 0 28px rgba(52,255,106,0.25);
    }

    *{ box-sizing: border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      font-family: var(--font);
      color: var(--text);
      background:
        radial-gradient(1200px 800px at 20% -10%, rgba(52,255,106,0.14), transparent 55%),
        radial-gradient(900px 600px at 80% 10%, rgba(52,255,106,0.10), transparent 60%),
        radial-gradient(900px 700px at 50% 120%, rgba(0,232,90,0.10), transparent 60%),
        linear-gradient(180deg, #040604 0%, #070a07 35%, #030503 100%);
      overflow-x:hidden;
    }

    /* Subtle animated grain + scanlines */
    .fx-grain, .fx-scan{
      position:fixed; inset:0;
      pointer-events:none;
      z-index: 0;
    }
    .fx-grain{
      opacity:0.10;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      animation: grain 10s steps(6) infinite;
    }
    @keyframes grain{
      0%{ transform: translate(0,0); }
      20%{ transform: translate(-2%, 1%); }
      40%{ transform: translate(2%, -1%); }
      60%{ transform: translate(-1%, -2%); }
      80%{ transform: translate(1%, 2%); }
      100%{ transform: translate(0,0); }
    }
    .fx-scan{
      opacity:0.12;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.08) 0px,
        rgba(255,255,255,0.08) 1px,
        transparent 2px,
        transparent 6px
      );
      mix-blend-mode: overlay;
    }

    /* App layout */
    .app{
      position:relative;
      z-index:1;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    .topbar{
      position:sticky;
      top:0;
      z-index: 10;
      backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(5,8,5,0.82) 0%, rgba(5,8,5,0.55) 100%);
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }

    .nav{
      max-width: 1180px;
      margin:0 auto;
      padding: 14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }

    /* Replaceable interactive logo */
    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      text-decoration:none;
      color: var(--text);
      user-select:none;
    }
    .logo{
width: 44px; height: 44px;
border-radius: 14px;
background:
radial-gradient(24px 24px at 30% 25%, rgba(255,255,255,0.65), transparent 50%),
linear-gradient(135deg, rgba(52,255,106,0.95), rgba(0,232,90,0.60));
box-shadow: 0 12px 30px rgba(52,255,106,0.18), 0 12px 40px rgba(0,0,0,0.35);
border: 1px solid rgba(255,255,255,0.18);
position:relative;
overflow:hidden;
display: flex:      
transform: translateZ(0);
transition: transform .18s ease, box-shadow .18s ease;
}
    .logo img{
  width: 76%;
  height: 76%;
  object-fit: contain;
  transform: translateX(-1px) scale(1.04);
}
    .logo::after{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 180deg, transparent, rgba(255,255,255,0.35), transparent);
      animation: spin 2.7s linear infinite;
      opacity:0.45;
    }
    @keyframes spin{
      to{ transform: rotate(360deg); }
    }
    .brand:hover .logo{
      transform: scale(1.03) rotate(-2deg);
      box-shadow: 0 14px 40px rgba(52,255,106,0.22), 0 16px 50px rgba(0,0,0,0.45);
    }

    .brand-text{
      display:flex; flex-direction:column;
      line-height:1.05;
    }
    .brand-text b{
      font-size: 14px;
      letter-spacing: 0.10em;
      text-transform: uppercase;
    }
    .brand-text span{
      font-size: 12px;
      color: var(--muted);
      font-family: var(--mono);
    }

    .navlinks{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    /* Interactive buttons with pseudo-elements */
    .btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 650;
      letter-spacing: 0.02em;
      position:relative;
      overflow:hidden;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
      box-shadow: 0 10px 22px rgba(0,0,0,0.22);
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap: 10px;
      user-select:none;
    }
    .btn::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(120px 60px at var(--mx, 20%) var(--my, 30%), rgba(52,255,106,0.35), transparent 55%),
        linear-gradient(135deg, rgba(255,255,255,0.10), transparent 60%);
      opacity:0;
      transition: opacity .15s ease;
      pointer-events:none;
    }
    .btn::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.20), transparent);
      transform: translateX(-120%);
      transition: transform .45s ease;
      opacity:0.35;
      pointer-events:none;
    }
    .btn:hover{
      border-color: rgba(52,255,106,0.35);
      background: rgba(255,255,255,0.08);
      box-shadow: 0 14px 30px rgba(0,0,0,0.28), 0 0 0 1px rgba(52,255,106,0.10), var(--glow);
      transform: translateY(-1px);
    }
    .btn:hover::before{ opacity:1; }
    .btn:hover::after{ transform: translateX(120%); }
    .btn:active{
      transform: translateY(0px) scale(0.99);
      box-shadow: 0 10px 22px rgba(0,0,0,0.25);
    }
    .btn:focus-visible{
      outline:none;
      box-shadow: 0 0 0 3px rgba(52,255,106,0.28), 0 0 0 1px rgba(255,255,255,0.18), var(--shadow2);
      border-color: rgba(52,255,106,0.40);
    }

    .btn-primary{
      border-color: rgba(52,255,106,0.50);
      background: linear-gradient(135deg, rgba(52,255,106,0.26), rgba(255,255,255,0.06));
    }
    .pill{
      font-family: var(--mono);
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.25);
      color: rgba(255,255,255,0.80);
    }

    /* Typography styles that make adding text later easy */
    .h1, .h2, .h3{
      margin:0;
      letter-spacing: 0.02em;
      text-transform: uppercase;
    }
    .h1{
      font-size: clamp(30px, 4.2vw, 52px);
      line-height:1.03;
      text-shadow: 0 0 14px rgba(52,255,106,0.22), 0 10px 40px rgba(0,0,0,0.35);
    }
    .h2{
      font-size: clamp(22px, 3vw, 32px);
      text-shadow: 0 0 10px rgba(52,255,106,0.18), 0 10px 28px rgba(0,0,0,0.30);
    }
    .h3{
      font-size: 16px;
      opacity: 0.95;
      text-shadow: 0 0 8px rgba(52,255,106,0.15);
    }
    .glow-hover{
      transition: text-shadow .16s ease, transform .16s ease;
      display:inline-block;
    }
    .glow-hover:hover{
      text-shadow:
        0 0 18px rgba(52,255,106,0.35),
        0 0 40px rgba(52,255,106,0.18),
        0 12px 40px rgba(0,0,0,0.45);
      transform: translateY(-1px);
    }
    .p{
      margin: 10px 0 0;
      color: var(--muted);
      font-size: 14.5px;
      line-height:1.6;
      max-width: 70ch;
    }
    .kicker{
      font-family: var(--mono);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: 12px;
      color: rgba(255,255,255,0.72);
      margin-bottom: 12px;
    }
    .link{
      color: rgba(52,255,106,0.95);
      text-decoration:none;
      border-bottom: 1px dashed rgba(52,255,106,0.55);
    }
    .link:hover{ border-bottom-style: solid; }

    /* Content pages */
    main{
      flex:1;
      width:100%;
    }
    .page{
      display:none;
      max-width: 1180px;
      margin: 0 auto;
      padding: 22px 18px 64px;
    }
    .page.active{
      display:block;
      animation: fadeUp .35s ease both;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(8px); }
      to{ opacity:1; transform: translateY(0); }
    }

    /* Hero section */
    .hero{
      position:relative;
      min-height: 68vh;
      border-radius: var(--radius2);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,0.10);
      background:
        radial-gradient(900px 600px at 20% 25%, rgba(52,255,106,0.18), transparent 60%),
        radial-gradient(800px 650px at 90% 10%, rgba(255,255,255,0.10), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      box-shadow: var(--shadow);
    }

    .hero-grid{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 16px;
      padding: 26px;
      position:relative;
      z-index:2;
    }
    @media (max-width: 900px){
      .hero-grid{ grid-template-columns: 1fr; }
    }

    .hero-left{
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap: 12px;
      padding: 6px 6px 12px;
    }
    .hero-actions{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      margin-top: 10px;
    }

    /* Dynamic image stack (parallax) */
    .hero-right{
      position:relative;
      min-height: 340px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .car-stack{
      position:relative;
      width: min(420px, 90%);
      aspect-ratio: 4/3;
      transform-style: preserve-3d;
      filter: drop-shadow(0 18px 50px rgba(0,0,0,0.55));
    }
    .car-card{
      position:absolute;
      inset:0;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.14);
      overflow:hidden;
      background: rgba(255,255,255,0.04);
      transform: translateZ(0);
      transition: transform .25s ease, opacity .25s ease, filter .25s ease;
    }
    .car-card img{
      width:100%;
      height:100%;
      object-fit: cover;
      transform: scale(1.03);
      filter: saturate(1.05) contrast(1.08);
    }
    .car-card::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(220px 160px at 30% 35%, rgba(52,255,106,0.18), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,0.00), rgba(0,0,0,0.35));
      pointer-events:none;
    }

    .card-a{ transform: translate3d(-10px, -8px, 0) rotate(-1.5deg); opacity: 0.92; }
    .card-b{ transform: translate3d(10px, 8px, 0) rotate(1.0deg); opacity: 0.88; mix-blend-mode: screen; }
    .card-c{ transform: translate3d(0, 16px, 0) rotate(0.3deg); opacity: 0.78; }

    /* Scroll hints + floating HUD */
    .hud{
      position:absolute;
      left: 18px;
      bottom: 18px;
      display:flex;
      gap: 10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
      backdrop-filter: blur(12px);
      box-shadow: 0 14px 40px rgba(0,0,0,0.35);
      z-index: 3;
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,0.78);
    }
    .dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: rgba(52,255,106,0.85);
      box-shadow: 0 0 16px rgba(52,255,106,0.35);
      animation: pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(0.95); opacity: 0.7; }
      50%{ transform: scale(1.15); opacity: 1; }
    }

    /* Sections */
    .section{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 980px){
      .section{ grid-template-columns: 1fr; }
    }
    .panel{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.10);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      padding: 16px;
      box-shadow: var(--shadow2);
      position:relative;
      overflow:hidden;
    }
    .panel::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(260px 140px at 25% 20%, rgba(52,255,106,0.16), transparent 60%),
        radial-gradient(240px 160px at 90% 0%, rgba(255,255,255,0.10), transparent 58%);
      opacity:0.9;
      pointer-events:none;
    }
    .panel > *{ position:relative; z-index:1; }

    .metric{
      display:flex;
      align-items:baseline;
      gap: 10px;
      margin-top: 6px;
    }
    .metric b{
      font-size: 26px;
      color: rgba(255,255,255,0.92);
      text-shadow: 0 0 14px rgba(52,255,106,0.18);
    }
    .metric span{
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,0.65);
    }

    /* Servers list */
    .servers-grid{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 14px;
    }
    @media (max-width: 980px){
      .servers-grid{ grid-template-columns: 1fr; }
    }

    .table{
      width:100%;
      border-collapse: collapse;
      overflow:hidden;
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.04);
    }
    .table th, .table td{
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
      font-size: 13.5px;
      color: rgba(255,255,255,0.85);
    }
    .table th{
      text-align:left;
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.70);
      background: rgba(0,0,0,0.18);
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,0.75);
    }
    .ping{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: rgba(52,255,106,0.85);
      box-shadow: 0 0 16px rgba(52,255,106,0.25);
    }
    .ping.warn{ background: rgba(255, 230, 95, 0.90); box-shadow: 0 0 16px rgba(255,230,95,0.20); }
    .ping.bad{ background: rgba(255, 110, 110, 0.90); box-shadow: 0 0 16px rgba(255,110,110,0.20); }

    /* Forms */
    .form{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 900px){
      .form{ grid-template-columns: 1fr; }
    }
    .field{
      display:flex;
      flex-direction:column;
      gap: 7px;
    }
    label{
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,0.70);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }
    input, select, textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.25);
      color: rgba(255,255,255,0.90);
      box-shadow: 0 10px 22px rgba(0,0,0,0.20);
      outline:none;
      transition: border-color .14s ease, box-shadow .14s ease, transform .14s ease;
      font-family: var(--font);
      font-size: 14px;
    }
    textarea{ min-height: 110px; resize: vertical; }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(52,255,106,0.38);
      box-shadow: 0 0 0 3px rgba(52,255,106,0.22), 0 10px 26px rgba(0,0,0,0.25);
      transform: translateY(-1px);
    }

    /* Toast */
    .toast{
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 999;
      min-width: min(380px, calc(100vw - 32px));
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(14px);
      box-shadow: 0 18px 60px rgba(0,0,0,0.55);
      padding: 12px 12px;
      display:none;
    }
    .toast.show{ display:block; animation: toastIn .25s ease both; }
    @keyframes toastIn{
      from{ opacity:0; transform: translateY(8px); }
      to{ opacity:1; transform: translateY(0); }
    }
    .toast .row{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }
    .toast b{
      font-size: 13px;
      letter-spacing: 0.02em;
    }
    .toast p{
      margin: 6px 0 0;
      color: rgba(255,255,255,0.72);
      font-size: 13px;
      line-height:1.45;
    }

    /* Footer */
    footer{
      max-width: 1180px;
      margin: 0 auto;
      padding: 18px 18px 28px;
      color: rgba(255,255,255,0.55);
      font-family: var(--mono);
      font-size: 12px;
    }

    /* Small icon */
    .ic{
      width: 14px; height: 14px;
      display:inline-block;
      border-radius: 4px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(52,255,106,0.22);
      box-shadow: 0 0 14px rgba(52,255,106,0.18);
    }
    .logo{
    width: 50px;
    height: 50px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.18);
    background: rgba(255,255,255,0.06);
    box-shadow: 0 14px 40px rgba(0,0,0,0.35);
    overflow: hidden;                 /* ðŸ”‘ this clips the image */
    display: flex;
    align-items: center;
    justify-content: center;
    }

    
    .logo img{
    width: 100%;
    height: 100%;
    object-fit: cover;   /* fills shape, may crop edges */
    padding: 0;
    }
  </style>
</head>

<body>
  <div class="fx-grain"></div>
  <div class="fx-scan"></div>

  <div class="app">
    <!-- Top Bar / Navigation -->
    <header class="topbar">
      <nav class="nav">
        <!-- Logo goes home -->
        
        <a class="brand" href="#home" data-nav="home" aria-label="Go to Home">
          <div class="logo">
            <img src="./img/lg.webp" alt="Pakistan CutUp Logo">" 
            </div>
          <div class="brand-text">
            <b>Pakistan CutUp</b>
            <span>pakistani asseto corsa servers</span>
          </div>
        </a>

        <div class="navlinks">
          <a class="btn" href="#home" data-nav="home"><span class="ic"></span> Home</a>
          <a class="btn" href="#servers" data-nav="servers"><span class="ic"></span> Servers</a>
          <a class="btn btn-primary" href="#get-started" data-nav="get-started"><span class="ic"></span> Get Started</a>
          <a class="btn" href="#login" data-nav="login"><span class="ic"></span> Login</a>
        </div>
      </nav>
    </header>

    <main>
      <!-- HOME PAGE -->
      <section class="page active" id="page-home" data-page="home">
        <div class="hero" id="hero">
          <div class="hero-grid">
            <div class="hero-left">
              <div class="kicker">About Us // PKCU</div>

              <h1 class="h1 glow-hover">Precision. Pace. <span style="color:var(--green)">Presence</span>.</h1>
              <p class="p">
                Pakistan's First Assetto Corsa's Street Racing and Cut-Up Server, This server includes 24/7 Murree Monal And Srp Server's Giving Full Shapatar Vibes, âš  THIS SERVER IS USED TO SIMULATE IRL TRAFFIC & DOESN'T PUT OTHERS LIVES AT RISK!  ðŸ‡µðŸ‡°
              </p>

              <div class="hero-actions">
                <button class="btn btn-primary" data-action="primary">
                  <span class="pill">NEW</span> Launch Quick Start
                </button>
                <button class="btn" data-action="watch">
                  <span class="pill">JOIN</span> View Servers
                </button>
              </div>

              <div class="section">
                <div class="panel">
                  <h3 class="h3 glow-hover">Server Info</h3>
                  <p class="p">Includes 2 to 3 lane highways to drift maps.</p>
                  <div class="metric"><b id="m1">0</b><span>total servers</span></div>
                </div>
                <div class="panel">
                  <h3 class="h3 glow-hover">Donations</h3>
                  <p class="p">donations to improve operations and help us setup. Please donate :p</p>
                  <div class="metric"><b id="m2">0</b><span>pkr</span></div>
                </div>
                <div class="panel">
                  <h3 class="h3 glow-hover">Active Community Members</h3>
                  
                  <div class="metric"><b id="m3">0</b><span>drivers and community members online</span></div>
                </div>
              </div>
            </div>

            <div class="hero-right">
              <!-- Replace images here with your own -->
              <div class="car-stack" id="carStack" aria-label="Dynamic Porsche GT3 images">
                <div class="car-card card-a">
                  <img
                    src="./img/CPO3BB4.jpeg.webp"
                    alt="PKCU M4g82"
                    loading="lazy"
                  />
                
              </div>

              <div class="hud">
                <div class="dot"></div>
                <div>Car: PKCU spec BMW M4 G82</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Extra scroll area to demonstrate scroll effects -->
        <div style="height: 42px"></div>

        <div class="panel">
          <h2 class="h2 glow-hover">Join our Discord!</h2>
          <p class="p">
            Use the links below to join our discord community.
          </p>
          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
            <a
                class="btn btn-primary"
                href="https://discord.gg/NJ7KrkGw"
                target="_blank"
                rel="noopener"
                >
                Join my Discord
            </a>
            <a class="btn" href="https://docs.google.com/spreadsheets/d/1N1PLVbQO-PXjg-ZrdF3y0PkKAuseE9Qsv6xtkT02T4s/edit?gid=0#gid=0" >Car & Track Downloads</a>
          </div>
        </div>
      </section>

      <!-- SERVERS PAGE -->
      <section class="page" id="page-servers" data-page="servers">
        <div class="panel">
          <div class="kicker">SERVERS // LIVE LOBBIES</div>
          <h1 class="h1 glow-hover">Find Your Server</h1>
          <p class="p">
            NOTE: Radmin VPN is required to join the servers.. 
                            PCKU OFFICIAL RADMIN,
                Name: PCKU OFFICIAL RADMIN ;
                Pass: pakistan or PAKISTAN
          </p>
        </div>

        <div class="servers-grid">
          <div class="panel">
            <h2 class="h2 glow-hover">Server Browser</h2>
            <div style="height:10px"></div>

            <table class="table" aria-label="Server list">
              <thead>
                <tr>
                  <th>Region</th>
                  <th>Mode</th>
                  <th>Ping</th>
                  <th>Link</th>
                </tr>
              </thead>
              <tbody id="serverRows">
                <!-- injected by JS -->
              </tbody>
            </table>
          </div>

          <div class="panel">
            <h2 class="h2 glow-hover">Filters</h2>
            <p class="p">Interactive filters.</p>

            <div class="form">
              <div class="field">
                <label for="region">Region</label>
                <select id="region">
                  <option value="all">All</option>
                  
                  
                </select>
              </div>

              <div class="field">
                <label for="mode">Mode</label>
                <select id="mode">
                  <option value="all">All</option>
                  <option value="Shapatar">Shapatar</option>
                  <option value="Arab">Arab</option>
                  <option value="Foreign">Foreign</option>
                  <option value="Drift">Drift</option>
                </select>
              </div>

              <div class="field" style="grid-column: 1 / -1;">
                <button class="btn btn-primary" id="applyFilters">Apply Filters</button>
              </div>
            </div>

            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
              <span class="badge"><span class="ping"></span> low ping</span>
              <span class="badge"><span class="ping warn"></span> medium</span>
              <span class="badge"><span class="ping bad"></span> high</span>
            </div>
          </div>
        </div>
      </section>

      <!-- GET STARTED PAGE -->
      <section class="page" id="page-get-started" data-page="get-started">
        <div class="panel">
          <div class="kicker">GET STARTED // QUICK SETUP</div>
          <h1 class="h1 glow-hover">Build Your Driver Profile</h1>
          <p class="p"></p>
        </div>

        <div class="panel" style="margin-top:14px;">
          <h2 class="h2 glow-hover">Setup</h2>

          <form class="form" id="startForm">
            <div class="field">
              <label for="driverName">Driver Name</label>
              <input id="driverName" placeholder="e.g., ApexHaider" required />
            </div>

            <div class="field">
              <label for="carClass">Car Class</label>
              <select id="carClass" required>
                <option value="GT3">Shapatar</option>
                <option value="GT4">Casual</option>
                <option value="Cup">Foreign</option>
              </select>
            </div>

            <div class="field">
              <label for="assist">Skill Level</label>
              <select id="assist">
                <option value="Pro">Pro</option>
                <option value="Balanced">Balanced</option>
                <option value="Beginner">Beginner</option>
              </select>
            </div>

            <div class="field">
              <label for="regionPref">Preferred Region</label>
              <select id="regionPref">
                <option value="AS">AS</option>
              </select>
            </div>

            <div class="field" style="grid-column: 1 / -1;">
              <label for="notes">Notes (optional)</label>
              <textarea id="notes" placeholder="Add your text."></textarea>
            </div>

            <div class="field">
              <button class="btn btn-primary" type="submit">Create Profile</button>
            </div>
            <div class="field">
              <button class="btn" type="button" id="randomize">Randomize</button>
            </div>
          </form>

          <div style="margin-top:10px;">
            <p class="p">
              
            </p>
          </div>
        </div>
      </section>

      <!-- LOGIN PAGE -->
      <section class="page" id="page-login" data-page="login">
        <div class="panel">
          <div class="kicker">LOGIN // DRIVER ACCOUNT</div>
          <h1 class="h1 glow-hover">Welcome Back</h1>
          <p class="p">Enter Valid Credentials</p>
        </div>

        <div class="panel" style="margin-top:14px;">
          <h2 class="h2 glow-hover">Sign In</h2>

          <form class="form" id="loginForm">
            <div class="field">
              <label for="email">Email</label>
              <input id="email" type="email" placeholder="you@example.com" required />
            </div>
            <div class="field">
              <label for="password">Password</label>
              <input id="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required />
            </div>

            <div class="field" style="grid-column: 1 / -1; display:flex; flex-direction:row; gap:10px; align-items:center;">
              <button  id="loginBtn" class="btn btn-primary" type="submit">Login</button>
              <button  id="logoutBtn" class="btn" type="button">Logout</button>
              <button id="signupBtn" class="btn">Create Account</button>
              <span id="authStatus"></span>
            </div>
          </form>

          
      </section>
    </main>

    <footer class="footer">
    <div class="footer-inner">    
      Â© <span id="year"></span> PakistanCutUp â€” Representing the Pakistani sim racing community â€¢ By Cyzer and Oxy â€¢ Socials: 
    
        <a
      href="https://instagram.com/oxzytto"
      target="_blank"
      rel="noopener"
      class="insta-link"
      aria-label="Instagram"
    >
      @oxzytto
    </a>
    &
    <a
      href="https://instagram.com/pakistancutup"
      target="_blank"
      rel="noopener"
      class="insta-link"
      aria-label="Instagram"
    >
      @pakistancutup
    </a>

    </div>
    </footer>
  

  <!-- Toast UI -->
  <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true">
    <div class="row">
      <div>
        <b id="toastTitle">Notification</b>
        <p id="toastMsg">Message goes here</p>
      </div>
      <button class="btn" id="toastClose" style="padding:8px 10px;">Close</button>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
        const SUPABASE_URL = "https://vlnvwndqsqyapxiqxbyb.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZsbnZ3bmRxc3F5YXB4aXF4YnliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjkxOTMsImV4cCI6MjA4NDUwNTE5M30.Pb3qDULYorurnsMFNrKjLqcFsDjSCAjK8L_OupZaBOE";
        const supa = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    

    /***********************************************************************
     * Single-file router (4 pages)
     * - Uses hash routing: #home, #servers, #get-started, #login
     ***********************************************************************/

     
    const pages = ["home", "servers", "get-started", "login"];
    const pageEls = new Map(pages.map(p => [p, document.querySelector(`[data-page="${p}"]`)]));

    function showPage(page){
      const p = pages.includes(page) ? page : "home";

      pageEls.forEach((el, key) => {
        el.classList.toggle("active", key === p);
      });

      // Scroll to top on page change (feel free to remove if you prefer)
      window.scrollTo({ top: 0, behavior: "smooth" });

      // Small toast for navigation
      toast("Navigation", `Opened: ${p.replace("-", " ")}`);
      // Update active hash if needed
      if (location.hash.replace("#","") !== p){
        history.replaceState(null, "", "#" + p);
      }
    }

    function handleRoute(){
      const hash = location.hash.replace("#","").trim();
      showPage(hash || "home");
    }

    window.addEventListener("hashchange", handleRoute);

    // Nav click (data-nav)
    document.addEventListener("click", (e) => {
      const a = e.target.closest("[data-nav]");
      if (!a) return;
      // allow links to work via hash
    });

    /***********************************************************************
     * Button interactions (pseudo "gamey" feedback)
     * - Mouse tracking for radial hover light
     ***********************************************************************/
    function trackButtonGlow(btn, ev){
      const r = btn.getBoundingClientRect();
      const mx = ((ev.clientX - r.left) / r.width) * 100;
      const my = ((ev.clientY - r.top) / r.height) * 100;
      btn.style.setProperty("--mx", mx + "%");
      btn.style.setProperty("--my", my + "%");
    }

    document.querySelectorAll(".btn").forEach(btn => {
      btn.addEventListener("mousemove", (ev) => trackButtonGlow(btn, ev));
      btn.addEventListener("touchmove", (ev) => {
        const t = ev.touches && ev.touches[0];
        if (t) trackButtonGlow(btn, t);
      }, { passive: true });
    });

    /***********************************************************************
     * Toast helper
     ***********************************************************************/
    const toastEl = document.getElementById("toast");
    const toastTitle = document.getElementById("toastTitle");
    const toastMsg = document.getElementById("toastMsg");
    const toastClose = document.getElementById("toastClose");

    let toastTimer = null;
    function toast(title, msg){
      toastTitle.textContent = title;
      toastMsg.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toastEl.classList.remove("show"), 2400);
    }
    toastClose.addEventListener("click", () => toastEl.classList.remove("show"));

    /***********************************************************************
     * HOME actions
     ***********************************************************************/
    document.addEventListener("click", (e) => {
      const btn = e.target.closest("[data-action]");
      if (!btn) return;

      const action = btn.getAttribute("data-action");
      if (action === "primary"){
        location.hash = "#get-started";
      }
      if (action === "watch"){
        location.hash = "#servers";
      }
      if (action === "toast"){
        toast("UI Test", "Buttons are interactive (hover/press/glow). Add your own actions in JS.");
      }
    });

    /***********************************************************************
     * Animated counters (Home)
     ***********************************************************************/
    function animateCount(el, to, duration=900){
      const start = performance.now();
      const from = 0;
      function tick(now){
        const t = Math.min(1, (now - start) / duration);
        const eased = 1 - Math.pow(1 - t, 3);
        el.textContent = Math.floor(from + (to - from) * eased).toLocaleString();
        if (t < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }

    function runHomeMetrics(){
      const m1 = document.getElementById("m1");
      const m2 = document.getElementById("m2");
      const m3 = document.getElementById("m3");
      if (!m1 || !m2 || !m3) return;
      animateCount(m1, 6);
      animateCount(m2, 2000);
      animateCount(m3, 150);
    }

    /***********************************************************************
     * Scroll-driven dynamic image movement (parallax + hue shift)
     * - Works best on Home page
     ***********************************************************************/
    const carStack = document.getElementById("carStack");
    const hero = document.getElementById("hero");
    const carCards = carStack ? Array.from(carStack.querySelectorAll(".car-card")) : [];

    function onScroll(){
      if (!hero || !carStack) return;

      const rect = hero.getBoundingClientRect();
      const vh = window.innerHeight || 1;

      // progress: 0 when hero top at top, 1 when hero bottom at top
      const progress = Math.min(1, Math.max(0, (vh - rect.top) / (vh + rect.height)));

      // Parallax/tilt effect (scroll-based)
      const tilt = (progress - 0.5) * 10;          // -5..+5 deg
      const lift = (0.5 - progress) * 18;          // vertical shift
      const drift = (progress - 0.5) * 22;         // horizontal shift

      carStack.style.transform = `
        translate3d(${drift}px, ${lift}px, 0)
        rotateX(${tilt}deg)
        rotateY(${(-tilt * 0.6)}deg)
      `;

      // Slight hue/brightness change for that â€œdynamic websiteâ€ feel
      const hue = 120 + Math.floor(progress * 40); // green-ish shift
      const sat = 1 + progress * 0.2;
      carStack.style.filter = `drop-shadow(0 18px 50px rgba(0,0,0,0.55)) hue-rotate(${hue}deg) saturate(${sat})`;

      // Individual card offsets
      carCards.forEach((card, idx) => {
        const depth = (idx + 1) * 6;
        const wobble = Math.sin((progress * Math.PI * 2) + idx) * 4;
        card.style.transform = `translate3d(${(idx-1)*10 + wobble}px, ${(idx-1)*12 + wobble}px, 0) rotate(${(idx-1)*1.1 + wobble*0.06}deg)`;
        card.style.opacity = (0.78 + (0.20 * (1 - Math.abs(progress - 0.5) * 2))) - idx * 0.05;
      });
    }

    window.addEventListener("scroll", onScroll, { passive: true });
    window.addEventListener("resize", onScroll);

    /***********************************************************************
     * Servers: demo data + filtering + join action
     ***********************************************************************/
    const servers = [
      { region:"AS", mode:"Shapatar", ping: 30, name:"Shutoko Revival Project", joinUrl:"https://acstuff.club/s/q:race/online/join?ip=26.243.63.191&httpPort=8083" },
      { region:"AS", mode:"Arab", ping: 30, name:"Sheikh Zayed Road", joinUrl:"https://acstuff.club/s/q:race/online/join?ip=26.243.63.191&httpPort=8087" },
      { region:"AS", mode:"Foreign", ping: 38, name:"SSP Long Island", joinUrl:"https://acstuff.club/s/q:race/online/join?ip=26.243.63.191&httpPort=8108" },
      { region:"AS", mode:"Foreign", ping: 28, name:"Shutoku Revival Project", joinUrl:"https://acstuff.club/s/q:race/online/join?ip=26.243.63.191&httpPort=8082" },
      { region:"AS", mode:"Drift", ping: 42, name:"Shadow Valley", joinUrl:"https://acstuff.club/s/q:race/online/join?ip=26.243.63.191&httpPort=8109" },
      { region:"AS", mode:"Shapatar", ping: 31, name:"Murree Monal", joinUrl:"https://acstuff.club/s/q:race/online/join?ip=26.243.63.191&httpPort=8084" },
    ];
    let currentServers = [];

    const serverRows = document.getElementById("serverRows");
    const regionSel = document.getElementById("region");
    const modeSel = document.getElementById("mode");
    const applyFilters = document.getElementById("applyFilters");

    function pingClass(p){
      if (p <= 45) return "ping";
      if (p <= 80) return "ping warn";
      return "ping bad";
    }
    

    function renderServers(list){
        currentServers = list;
      if (!serverRows) return;
      serverRows.innerHTML = "";
      list.forEach((s, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>
            <div style="display:flex; flex-direction:column; gap:4px;">
              <div style="font-weight:750;">${s.region} â€” ${s.name}</div>
              <div style="font-family:var(--mono); font-size:12px; color:rgba(255,255,255,0.60);">Lobby #${(i+1).toString().padStart(2,"0")}</div>
            </div>
          </td>
          <td>${s.mode}</td>
          <td>
            <span class="badge">
              <span class="${pingClass(s.ping)}"></span>
              ${s.ping} ms
            </span>
          </td>
          <td>
            <button class="btn btn-primary" data-join="${i}" ${s.joinUrl ? "" : "disabled"}>
        Join
        </button>
          </td>
        `;
        serverRows.appendChild(tr);
      });
                    
    }

    function applyServerFilters(){
      const r = regionSel ? regionSel.value : "all";
      const m = modeSel ? modeSel.value : "all";

      const filtered = servers.filter(s => {
        const okR = (r === "all") || (s.region === r);
        const okM = (m === "all") || (s.mode === m);
        return okR && okM;
      });

      renderServers(filtered);
      toast("Servers", `Showing ${filtered.length} server(s)`);
    }

    if (applyFilters){
      applyFilters.addEventListener("click", applyServerFilters);
    }


    document.addEventListener("click", (e) => {
  const joinBtn = e.target.closest("[data-join]");
  if (!joinBtn) return;

  const index = Number(joinBtn.dataset.join);
  const server = currentServers[index];

  if (!server || !server.joinUrl) {
    toast("Join unavailable", "No join link provided for this server.");
    return;
  }

  // Open server link
  window.open(server.joinUrl, "_blank");

  toast(
    "Joining server",
    `Opening ${server.name}`
  );
});
document.addEventListener("DOMContentLoaded", () => {
  populateFilterOptions(servers);
  renderServers(servers);
});



    /***********************************************************************
     * Get Started form actions
     ***********************************************************************/
    const startForm = document.getElementById("startForm");
    const randomizeBtn = document.getElementById("randomize");

    // ===== GET STARTED (Profile Setup) =====
const PROFILE_KEY = "gt3_profile_v1";

function getProfile() {
  try {
    return JSON.parse(localStorage.getItem(PROFILE_KEY) || "null");
  } catch {
    return null;
  }
}

function saveProfile(profile) {
  localStorage.setItem(PROFILE_KEY, JSON.stringify(profile));
}

function fillProfileForm(profile) {
  const driverName = document.getElementById("driverName");
  const carClass = document.getElementById("carClass");
  const assist = document.getElementById("assist");
  const regionPref = document.getElementById("regionPref");
  const notes = document.getElementById("notes");

  if (!driverName || !carClass || !assist || !regionPref || !notes) return;

  driverName.value = profile.driverName || "";
  carClass.value = profile.carClass || "GT3";
  assist.value = profile.assist || "Balanced";
  regionPref.value = profile.regionPref || "AS";
  notes.value = profile.notes || "";
}

function readProfileForm() {
  const driverName = document.getElementById("driverName");
  const carClass = document.getElementById("carClass");
  const assist = document.getElementById("assist");
  const regionPref = document.getElementById("regionPref");
  const notes = document.getElementById("notes");

  if (!driverName || !carClass || !assist || !regionPref || !notes) return null;

  const name = driverName.value.trim();

  // Basic validation
  if (name.length < 3) {
    toast("Profile", "Driver name must be at least 3 characters.");
    driverName.focus();
    return null;
  }
  if (name.length > 18) {
    toast("Profile", "Driver name should be 18 characters or less.");
    driverName.focus();
    return null;
  }

  return {
    driverName: name,
    carClass: carClass.value,
    assist: assist.value,
    regionPref: regionPref.value,
    notes: notes.value.trim(),
    savedAt: new Date().toISOString()
  };
}

function randomizeProfile() {
  const names = ["Apex", "Slipstream", "Vortex", "GreenLine", "NightRunner", "TurboZen"];
  const suffix = Math.floor(Math.random() * 900 + 100);
  const driverName = document.getElementById("driverName");
  const carClass = document.getElementById("carClass");
  const assist = document.getElementById("assist");
  const regionPref = document.getElementById("regionPref");

  if (!driverName || !carClass || !assist || !regionPref) return;

  driverName.value = `${names[Math.floor(Math.random() * names.length)]}${suffix}`;
  carClass.value = ["GT3", "GT4", "Cup"][Math.floor(Math.random() * 3)];
  assist.value = ["Pro", "Balanced", "Beginner"][Math.floor(Math.random() * 3)];
  regionPref.value = ["AS", ][Math.floor(Math.random() * 3)];

  toast("Profile", "Randomized your setup.");
}

// Wire up Get Started form
document.addEventListener("DOMContentLoaded", () => {
  const startForm = document.getElementById("startForm");
  const randomizeBtn = document.getElementById("randomize");

  // Load existing profile into form
  const existing = getProfile();
  if (existing) fillProfileForm(existing);

  if (startForm) {
    startForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const profile = readProfileForm();
      if (!profile) return;

      saveProfile(profile);
      toast("Profile Saved", `Welcome, ${profile.driverName}!`);

      // Optional: after saving, send user to Servers
      // location.hash = "#servers";
    });
  }

  if (randomizeBtn) {
    randomizeBtn.addEventListener("click", randomizeProfile);
  }
});

    function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    if (randomizeBtn){
      randomizeBtn.addEventListener("click", () => {
        const driverName = document.getElementById("driverName");
        const carClass = document.getElementById("carClass");
        const assist = document.getElementById("assist");
        const regionPref = document.getElementById("regionPref");

        if (driverName) driverName.value = rand(["ApexLine", "GreenFlag", "Chicane", "Slipstream", "Overtake"]);
        if (carClass) carClass.value = rand(["GT3","GT4","Cup"]);
        if (assist) assist.value = rand(["Pro","Balanced","Beginner"]);
        if (regionPref) regionPref.value = rand(["AS"]);

        toast("Randomized", "Setup fields filled (demo).");
      });
    }

    if (startForm){
      startForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = (document.getElementById("driverName")?.value || "Driver").trim();
        toast("Profile Created", `Welcome, ${name}. Next: pick a server and race!`);
        // pseudo: store profile locally (optional)
        localStorage.setItem("gt3_profile", JSON.stringify({
          name,
          carClass: document.getElementById("carClass")?.value,
          assist: document.getElementById("assist")?.value,
          region: document.getElementById("regionPref")?.value,
          notes: document.getElementById("notes")?.value || ""
        }));
      });
    }

    // ===== DRIVER PROFILE (Supabase) =====
function readProfileForm() {
  const driverName = document.getElementById("driverName");
  const carClass = document.getElementById("carClass");
  const assist = document.getElementById("assist");
  const regionPref = document.getElementById("regionPref");
  const notes = document.getElementById("notes");

  if (!driverName || !carClass || !assist || !regionPref || !notes) return null;

  const name = driverName.value.trim();
  if (name.length < 3) { toast("Profile", "Driver name must be at least 3 characters."); driverName.focus(); return null; }

  return {
    driverName: name,
    carClass: carClass.value,
    assist: assist.value,
    regionPref: regionPref.value,
    notes: notes.value.trim()
  };
}

function fillProfileForm(p) {
  const driverName = document.getElementById("driverName");
  const carClass = document.getElementById("carClass");
  const assist = document.getElementById("assist");
  const regionPref = document.getElementById("regionPref");
  const notes = document.getElementById("notes");
  if (!driverName || !carClass || !assist || !regionPref || !notes) return;

  driverName.value = p.driverName || "";
  carClass.value = p.carClass || "GT3";
  assist.value = p.assist || "Balanced";
  regionPref.value = p.regionPref || "AS";
  notes.value = p.notes || "";
}

async function saveProfileToAccount(profile) {
  const { data: { user } } = await supa.auth.getUser();
  if (!user) {
  toast("Profile", "Please log in first (Login page).");
  location.hash = "#login"; // sends them to login page in your single-file router
  return;
}

  const { error } = await supa.from("profiles").upsert({
    id: user.id,
    driver_name: profile.driverName,
    car_class: profile.carClass,
    assist: profile.assist,
    region_pref: profile.regionPref,
    notes: profile.notes,
    updated_at: new Date().toISOString()
  });

  if (error) return toast("Profile error", error.message);
  toast("Profile saved", "Saved to your account.");
}

async function loadProfileFromAccount() {
  const { data: { user } } = await supa.auth.getUser();
  if (!user) return;

  const { data, error } = await supa
    .from("profiles")
    .select("*")
    .eq("id", user.id)
    .maybeSingle();

  if (error) return; // avoid noisy toasts on first-time users
  if (data) {
    fillProfileForm({
      driverName: data.driver_name,
      carClass: data.car_class,
      assist: data.assist,
      regionPref: data.region_pref,
      notes: data.notes
    });
  }
}

// Hook the Get Started form submit
document.addEventListener("DOMContentLoaded", () => {
  const startForm = document.getElementById("startForm");

  if (startForm) {
    startForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const profile = readProfileForm();
      if (!profile) return;

      await saveProfileToAccount(profile);
    });
  }

  // If the user is already logged in, auto-load their profile
  loadProfileFromAccount();
});

    /***********************************************************************
     * Login form actions
     ***********************************************************************/
    const loginForm = document.getElementById("loginForm");
    const forgotBtn = document.getElementById("forgot");

    if (forgotBtn){
      forgotBtn.addEventListener("click", () => {
        toast("Password Reset", "Demo: add your real reset flow here later.");
      });
    }

    if (loginForm){
      loginForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const email = (document.getElementById("email")?.value || "").trim();
        toast("Login Successful", email ? `Signed in as ${email}` : "Signed in (demo).");
        // pseudo: navigate home
        location.hash = "#home";
      });
    }

// ===== AUTH (Robust) =====
function readFirstValue(ids) {
  for (const id of ids) {
    const el = document.getElementById(id);
    if (el && typeof el.value === "string") return el.value;
  }
  return "";
}

function getAuthFields() {
  const email = readFirstValue(["email", "authEmail"]).trim().toLowerCase();
  const password = readFirstValue(["password", "authPassword"]);
  return { email, password };
}

async function refreshAuthUI() {
  const { data: { user } } = await supa.auth.getUser();

  const authStatus = document.getElementById("authStatus");
  const logoutBtn = document.getElementById("logoutBtn");
  const loginBtn  = document.getElementById("loginBtn");
  const signupBtn = document.getElementById("signupBtn");

  if (authStatus) authStatus.textContent = user ? `Signed in as ${user.email}` : "Not signed in";
  if (logoutBtn) logoutBtn.style.display = user ? "inline-flex" : "none";
  if (loginBtn)  loginBtn.style.display  = user ? "none" : "inline-flex";
  if (signupBtn) signupBtn.style.display = user ? "none" : "inline-flex";

  return user;
}

// Use ONE click handler so it works even if your "pages" are shown/hidden
document.addEventListener("click", async (e) => {
  const signup = e.target.closest("#signupBtn");
  const login  = e.target.closest("#loginBtn");
  const logout = e.target.closest("#logoutBtn");

  // SIGN UP
  if (signup) {
    const { email, password } = getAuthFields();
    if (!email || !password) return toast("Sign up", "Enter email and password.");
    if (password.length < 6) return toast("Sign up", "Password must be at least 6 characters.");

    const { data, error } = await supa.auth.signUp({ email, password });
    if (error) return toast("Sign up failed", error.message);

    // If confirmations ON, session will be null until user confirms email
    if (!data.session) {
      toast("Account created", "Check your email to confirm, then login.");
    } else {
      toast("Account created", "Youâ€™re signed in.");
      await refreshAuthUI();
      if (typeof loadProfileFromAccount === "function") await loadProfileFromAccount();
    }
    return;
  }

  // LOGIN
  if (login) {
    const { email, password } = getAuthFields();
    if (!email || !password) return toast("Login", "Enter email and password.");

    const { error } = await supa.auth.signInWithPassword({ email, password });
    if (error) return toast("Login failed", error.message);

    toast("Welcome back", email);
    await refreshAuthUI();
    if (typeof loadProfileFromAccount === "function") await loadProfileFromAccount();
    return;
  }

  // LOGOUT
  if (logout) {
    const { error } = await supa.auth.signOut();
    if (error) return toast("Logout failed", error.message);

    toast("Logged out", "See you on track.");
    await refreshAuthUI();
    return;
  }
});

document.addEventListener("DOMContentLoaded", () => {
  refreshAuthUI();
});

    // ===== AUTH UI =====
async function refreshAuthUI() {
  const { data: { user } } = await supa.auth.getUser();

  const authStatus = document.getElementById("authStatus");
  const logoutBtn = document.getElementById("logoutBtn");
  const loginBtn  = document.getElementById("loginBtn");
  const signupBtn = document.getElementById("signupBtn");

  if (authStatus) authStatus.textContent = user ? `Signed in as ${user.email}` : "Not signed in";
  if (logoutBtn) logoutBtn.style.display = user ? "inline-flex" : "none";
  if (loginBtn)  loginBtn.style.display  = user ? "none" : "inline-flex";
  if (signupBtn) signupBtn.style.display = user ? "none" : "inline-flex";

  return user;
}

document.addEventListener("DOMContentLoaded", async () => {
  await refreshAuthUI();

  // LOGIN
  const loginForm = document.getElementById("loginForm");
  if (loginForm) {
    loginForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email")?.value.trim().toLowerCase();
      const password = document.getElementById("password")?.value;

      if (!email || !password) return toast("Login", "Enter email + password.");

      const { error } = await supa.auth.signInWithPassword({ email, password });
      if (error) return toast("Login failed", error.message);

      toast("Welcome back", email);
      await refreshAuthUI();
      await loadProfileFromAccount(); // auto-load driver profile after login
    });
  }

  // SIGNUP
  const signupBtn = document.getElementById("signupBtn");
  if (signupBtn) {
    signupBtn.addEventListener("click", async () => {
      const email = document.getElementById("email")?.value.trim().toLowerCase();
      const password = document.getElementById("password")?.value;

      if (!email || !password) return toast("Sign up", "Enter email + password first.");
      if (password.length < 6) return toast("Sign up", "Password must be at least 6 characters.");

      const { error } = await supa.auth.signUp({ email, password });
      if (error) return toast("Sign up failed", error.message);

      toast("Account created", "Now log in (or check email if confirmation is enabled).");
      await refreshAuthUI();
    });
  }

  // LOGOUT
  const logoutBtn = document.getElementById("logoutBtn");
  if (logoutBtn) {
    logoutBtn.addEventListener("click", async () => {
      await supa.auth.signOut();
      toast("Logged out", "See you on track.");
      await refreshAuthUI();
    });
  }
});

    /***********************************************************************
     * Boot
     ***********************************************************************/
    document.getElementById("year").textContent = new Date().getFullYear();
    handleRoute();
    runHomeMetrics();
    renderServers(servers);
    onScroll();
  </script>
</body>
</html>
